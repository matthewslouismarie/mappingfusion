{% extends 'base.html.twig' %}

{% from 'macros/article_mosaic.html.twig' import articleMosaic %}

{% block title %}Acceuil{% endblock %}

{% block description %}Actualité et tests dans l’univers Half-Life !{% endblock %}

{% block resources %}
<link rel="canonical" href="{{ app.homeUrl() }}" />
<link rel="stylesheet" href="https://unpkg.com/@glidejs/glide@3.6.0/dist/css/glide.core.css">
{% endblock %}

{% block body %}
<div class="page-home">
    <div class="glide">
        <div class="glide__track" data-glide-el="track">
            <ul class="glide__slides">
            {% for a in featured_articles %}
                <li class="glide__slide" itemscope itemtype="https://schema.org/Article">
                    <a class="link _txt -txtxl" href="{{ app.router.generateUrl('article', {id: a.id}) }}" style="background-image: url({{ app.resource(a.cover_filename) }});" itemprop="url">
                        {% if a.sub_title %}<div class="sub-title">{{ app.mk.format(a.sub_title)|raw }}</div>{% endif %}
                        <div class="title">{{ app.mk.format(a.title)|raw }}</div>
                    </a>
                </li>
            {% endfor %}
            </ul>
        </div>
        <div class="glide__bullets" data-glide-el="controls[nav]">
            {% for a in featured_articles %}
            <button aria-label="{{ featured_articles[loop.index0].title }}" class="glide__bullet" data-glide-dir="={{ loop.index0 }}" style="background-image: url('{{ app.smallImage(featured_articles[loop.index0].cover_filename) }}');" type="button">
                <div class="image" ></div>
            </button>
            {% endfor %}
        </div>
    </div>
    {% include 'sections/social-networks.html.twig' %}
    <section class="site-maps-and-mods-tests">
        <div class="_wrapper _gap -gap-row-l2 _padding -padding-vert-l2">
            <div class="section-heading -white">
                <img class="image" {{ app.imgAttr('Tests maps et mods', 'tests_icon.svg', false, 116, 107)|raw }}>
                <h2 class="text _txt -txtl">
                    <div class="line _txt -bold">Tests maps et mods<br></div>
                    <div class="line">proposés par l’équipe</div>
                </h2>
            </div>
            <ul class="list">
                {% for r in last_reviews %}
                <li class="item" itemscope itemtype="https://schema.org/Article">
                    <a class="review-mosaic-bare"{% if r.cover_filename %} style="background-image: url('{{ app.smallImage(r.cover_filename) }}');"{% endif %} href="{{ app.router.generateUrl('article', [r.id]) }}" itemprop="url">
                        <div class="content">
                            <span class="playable _txt -txtl" itemprop="about">{{ r.review.playable.name }}</span>
                            {% if r.review.playable.game is defined %}<span class="std-badge _txt -txts">{{ r.review.playable.game.name }}</span>{% endif %}
                        </div>
                    </a>
                </li>
                {% endfor %}
            </ul>
            <a class="std-button -white" href="{{ app.router.generateUrl('tests') }}">
                <div class="text _txt -bold -txtm">Voir plus de tests</div>
            </a>
        </div>
    </section>
    <section class="site-section-news-articles">
        <div class="_wrapper _gap -gap-row-l _padding -padding-hori-mobile -padding-vert-xl">
            <div class="section-heading -inline -white">
                <img class="image" {{ app.imgAttr('Actualités', 'news.svg', false, 107, 103)|raw }}>
                <h2 class="text _txt -txtl">
                    <span class="regular">Les dernières </span>
                    <span class="_txt -bold">actualités</span>
                </h2>
            </div>
            <ul class="list _gap -gap-row-l">
                {% for a in last_articles %}
                <li class="item">{{ articleMosaic(a, app) }}</li>
                {% endfor %}
            </ul>
            
            <a class="std-button -white" href="{{ app.router.generateUrl('articles') }}">
                <div class="text _txt -bold -txtm">Voir plus d’articles</div>
            </a>
        </div>
    </section>
    
    <section class="site-section-beginners">
        <div class="_wrapper _gap -gap-row-l _padding -padding-hori-mobile">
            <div class="left _txt -txtl _gap -gap-row-l _padding -padding-vert-xl">
                <h2 class="title">Nouveau et un peu perdu ?<br>Pas de panique !</h2>
                <p class="text">Consulte dès à présent <em>tous nos dossiers explicatifs</em> pour bien <em>comprendre comment fonctionnent Half-Life et ses mods</em>.</p>
            </div>
            <dl class="right _gap -gap-row-l _padding -padding-vert-xl">
                <div class="item -sc _gap -gap-row-s2">
                    <dt class="subject _txt -txtm">Fonctionnement Sven Co-op</dt>
                    <dd class="text _txt -txtm">Guide d’installation, lancement de partie, création de serveurs, etc…</dd>
                    <dd>
                        <a class="std-button -white" href="{{ app.router.generateUrl('article', ['guide-sven-co-op']) }}">
                            <div class="text _txt -txts">
                                <span class="_txt -bold">En savoir plus</span>
                            </div>
                        </a>
                    </dd>
                </div>
                <div class="item -mods _gap -gap-row-s2">
                    <dt class="subject _txt -txtm">Installation de mods</dt>
                    <dd class="text _txt -txtm">Installation des mods pour Half-Life et Half-Life 2</dd>
                    <dd>
                        <a class="std-button -white" href="{{ app.router.generateUrl('article', ['installer-un-mod']) }}">
                            <div class="text _txt -txts">
                                <span class="_txt -bold">En savoir plus</span>
                            </div>
                        </a>
                    </dd>
                </div>
            </dl>
        </div>
    </section>
</div>
{% endblock %}

{% block scriptInit %}
<script src="https://unpkg.com/@glidejs/glide@3.6.0/dist/glide.js"></script>
<script>
  new Glide('.glide', {gap: 0}).mount()
</script>
{% endblock %}